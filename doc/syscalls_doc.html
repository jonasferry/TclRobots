<h3>TABLE OF CONTENTS</h3>
<ul>
<li>1. <a href="#robo0">syscalls/file_header</a></li>
<li>2. <a href="#robo1">syscalls/helper</a></li>
<ul>
<li>2.1. <a href="#robo2">helper/_ping_check</a></li>
<li>2.2. <a href="#robo3">helper/_syscall_yield</a></li>
</ul>
<li>3. <a href="#robo4">syscalls/basic_cmds</a></li>
<ul>
<li>3.1. <a href="#robo5">basic_cmds/scanner</a></li>
<li>3.2. <a href="#robo6">basic_cmds/dsp</a></li>
<li>3.3. <a href="#robo7">basic_cmds/alert</a></li>
<li>3.4. <a href="#robo8">basic_cmds/cannon</a></li>
<li>3.5. <a href="#robo9">basic_cmds/health</a></li>
<li>3.6. <a href="#robo10">basic_cmds/drive</a></li>
<li>3.7. <a href="#robo11">basic_cmds/speed</a></li>
<li>3.8. <a href="#robo12">basic_cmds/heat</a></li>
<li>3.9. <a href="#robo13">basic_cmds/loc_x</a></li>
<li>3.10. <a href="#robo14">basic_cmds/loc_y</a></li>
<li>3.11. <a href="#robo15">basic_cmds/tick</a></li>
</ul>
<li>4. <a href="#robo16">syscalls/team_cmds</a></li>
<ul>
<li>4.1. <a href="#robo17">team_cmds/team_declare</a></li>
<li>4.2. <a href="#robo18">team_cmds/team_send</a></li>
<li>4.3. <a href="#robo19">team_cmds/team_get</a></li>
</ul>
<li>5. <a href="#robo20">syscalls/convenience_cmds</a></li>
<ul>
<li>5.1. <a href="#robo21">convenience_cmds/dputs</a></li>
<li>5.2. <a href="#robo22">convenience_cmds/rand</a></li>
<li>5.3. <a href="#robo23">convenience_cmds/callback</a></li>
</ul>
<li>6. <a href="#robo24">syscalls/deprecated_cmds</a></li>
<ul>
<li>6.1. <a href="#robo25">deprecated_cmds/after</a></li>
<li>6.2. <a href="#robo26">deprecated_cmds/damage</a></li>
</ul>
</ul>
<a name="robo0"></a>
<a name="syscalls2ffile5fheader"></a>
<h1>1.  syscalls/file_header [ file ]  </h1>
<p class="item_name">NAME</p>
<p>   syscalls.tcl
</p>
<p class="item_name">DESCRIPTION</p>
<p>   This file contains the syscalls robots can use.
</p>

<p>   The authors are Jonas Ferry, Peter Spjuth and Martin Lindskog, based
   on TclRobots 2.0 by Tom Poindexter.
</p>

<p>   See http://tclrobots.org for more information.
</p>
<p class="item_name">COPYRIGHT</p>
<p>   Jonas Ferry (jonas.ferry@gmail.com), 2010. Licensed under the
   Simplified BSD License. See LICENSE file for details.
</p>
<a name="robo1"></a>
<a name="syscalls2fhelper"></a>
<h1>2.  syscalls/helper [ info ]  </h1>
<p class="item_name">NAME</p>
<p>   helper
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Helper procedures
</p>
<a name="robo2"></a>
<a name="helper2f5fping5fcheck"></a>
<h2>2.1.  helper/_ping_check [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   _ping_check
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Check the answer from a yield for a ping alert
</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc _ping_check {val} {
    if {[lindex $val 0] eq "alert"} {
        #  ping_proc:        dsp:
        [lindex $val 1] [lindex $val 2]
        set val [lrange $val 3 end]
    }
    return $val
}
</pre>
<a name="robo3"></a>
<a name="helper2f5fsyscall5fyield"></a>
<h2>2.2.  helper/_syscall_yield [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   _syscall_yield
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Combine the common syscall+yield call
</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc _syscall_yield {args} {
    set result [syscall callbackcheck]
    if {$result ne ""} {
        uplevel \#0 $result
    }
    syscall {*}$args
    return [_ping_check [yield]]
}
</pre>
<a name="robo4"></a>
<a name="syscalls2fbasic5fcmds"></a>
<h1>3.  syscalls/basic_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<p>   basic_cmds
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Basic commands
</p>
<a name="robo5"></a>
<a name="basic5fcmds2fscanner"></a>
<h2>3.1.  basic_cmds/scanner [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   scanner
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc scanner {degree resolution} {
    _syscall_yield scanner $degree $resolution
    _syscall_yield scanner $degree $resolution
}
</pre>
<a name="robo6"></a>
<a name="basic5fcmds2fdsp"></a>
<h2>3.2.  basic_cmds/dsp [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   dsp
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc dsp {} {
    _syscall_yield dsp
}
</pre>
<a name="robo7"></a>
<a name="basic5fcmds2falert"></a>
<h2>3.3.  basic_cmds/alert [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   alert
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc alert {procname} {
    _syscall_yield alert $procname
}
</pre>
<a name="robo8"></a>
<a name="basic5fcmds2fcannon"></a>
<h2>3.4.  basic_cmds/cannon [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   cannon
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc cannon {degree range} {
    _syscall_yield cannon $degree $range
}
</pre>
<a name="robo9"></a>
<a name="basic5fcmds2fhealth"></a>
<h2>3.5.  basic_cmds/health [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   health
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc health {} {
    _syscall_yield health
}
</pre>
<a name="robo10"></a>
<a name="basic5fcmds2fdrive"></a>
<h2>3.6.  basic_cmds/drive [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   drive
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc drive {degree speed} {
    _syscall_yield drive $degree $speed
}
</pre>
<a name="robo11"></a>
<a name="basic5fcmds2fspeed"></a>
<h2>3.7.  basic_cmds/speed [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   speed
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc speed {} {
    _syscall_yield speed
}
</pre>
<a name="robo12"></a>
<a name="basic5fcmds2fheat"></a>
<h2>3.8.  basic_cmds/heat [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   heat
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc heat {} {
    _syscall_yield heat
}
</pre>
<a name="robo13"></a>
<a name="basic5fcmds2floc5fx"></a>
<h2>3.9.  basic_cmds/loc_x [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   loc_x
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc loc_x {} {
    _syscall_yield loc_x
}
</pre>
<a name="robo14"></a>
<a name="basic5fcmds2floc5fy"></a>
<h2>3.10.  basic_cmds/loc_y [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   loc_y
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc loc_y {} {
    _syscall_yield loc_y
}
</pre>
<a name="robo15"></a>
<a name="basic5fcmds2ftick"></a>
<h2>3.11.  basic_cmds/tick [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   tick
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc tick {} {
    _syscall_yield tick
}
</pre>
<a name="robo16"></a>
<a name="syscalls2fteam5fcmds"></a>
<h1>4.  syscalls/team_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<p>   team_cmds
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Team commands
</p>
<a name="robo17"></a>
<a name="team5fcmds2fteam5fdeclare"></a>
<h2>4.1.  team_cmds/team_declare [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   team_declare
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc team_declare {teamname} {
    _syscall_yield team_declare $teamname
}
</pre>
<a name="robo18"></a>
<a name="team5fcmds2fteam5fsend"></a>
<h2>4.2.  team_cmds/team_send [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   team_send
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc team_send {data} {
    syscall team_send $data
}
</pre>
<a name="robo19"></a>
<a name="team5fcmds2fteam5fget"></a>
<h2>4.3.  team_cmds/team_get [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   team_get
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc team_get {} {
    syscall team_get
}
</pre>
<a name="robo20"></a>
<a name="syscalls2fconvenience5fcmds"></a>
<h1>5.  syscalls/convenience_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<p>   convenience_cmds
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Convenience commands
</p>
<a name="robo21"></a>
<a name="convenience5fcmds2fdputs"></a>
<h2>5.1.  convenience_cmds/dputs [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   dputs
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc dputs {args} {
    syscall dputs $args
}
</pre>
<a name="robo22"></a>
<a name="convenience5fcmds2frand"></a>
<h2>5.2.  convenience_cmds/rand [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   rand
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc rand {max} {
    syscall rand $max
}
</pre>
<a name="robo23"></a>
<a name="convenience5fcmds2fcallback"></a>
<h2>5.3.  convenience_cmds/callback [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   callback
</p>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc callback {time script} {
    syscall callback $time $script
}
</pre>
<a name="robo24"></a>
<a name="syscalls2fdeprecated5fcmds"></a>
<h1>6.  syscalls/deprecated_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<p>   deprecated_cmds
</p>
<p class="item_name">DESCRIPTION</p>
<p>   Deprecated commands kept for backwards compatibility.
</p>
<a name="robo25"></a>
<a name="deprecated5fcmds2fafter"></a>
<h2>6.1.  deprecated_cmds/after [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   after
</p>
<p class="item_name">DESCRIPTION</p>
<p>   After does not work, emulate it using callbacks
</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc after {ms args} {
    set ticks [expr {$ms / 100}]
    if {[llength $args] == 0} {
        # Emulate a wait using some syscalls
        for {set t 0} {$t &lt; $ticks} {incr t} {
            syscall speed
            return [_ping_check [yield]]
        }

    } else {
        set script [join $args]
        syscall callback $ticks $script
    }
    return
}
</pre>
<a name="robo26"></a>
<a name="deprecated5fcmds2fdamage"></a>
<h2>6.2.  deprecated_cmds/damage [ procedure ]  </h2>
<p class="item_name">NAME</p>
<p>   damage
</p>
<p class="item_name">DESCRIPTION</p>
<p>   damage
</p>

<p>   The damage command reports the current percent of damage suffered by
   the robot, 0-99. At 100% damage, the robot is "dead", and as such,
   the control program is no longer running.
</p>
<p class="item_name">SOURCE</p>

