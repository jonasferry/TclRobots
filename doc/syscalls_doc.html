
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html  xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<meta http-equiv='Content-Style-Type' content='text/css' />
<meta http-equiv='Content-type' content='text/html; charset=ISO-8859-1' />
<link rel='stylesheet' href='./tclrobots.css' type='text/css' />
<title>syscalls_doc</title>
<!-- Source: ./ -->
<!-- Generated with ROBODoc Version 4.99.38 (May  2 2009) -->
</head>
<body>

<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<h3>TABLE OF CONTENTS</h3>
<ul>
<li>1. <a href="#robo0">syscalls/file_header</a></li>
<li>2. <a href="#robo1">syscalls/helper</a></li>
<ul>
<li>2.1. <a href="#robo2">helper/_ping_check</a></li>
<li>2.2. <a href="#robo3">helper/_syscall_yield</a></li>
</ul>
<li>3. <a href="#robo4">syscalls/basic_cmds</a></li>
<ul>
<li>3.1. <a href="#robo5">basic_cmds/scanner</a></li>
<li>3.2. <a href="#robo6">basic_cmds/dsp</a></li>
<li>3.3. <a href="#robo7">basic_cmds/alert</a></li>
<li>3.4. <a href="#robo8">basic_cmds/cannon</a></li>
<li>3.5. <a href="#robo9">basic_cmds/health</a></li>
<li>3.6. <a href="#robo10">basic_cmds/drive</a></li>
<li>3.7. <a href="#robo11">basic_cmds/speed</a></li>
<li>3.8. <a href="#robo12">basic_cmds/heat</a></li>
<li>3.9. <a href="#robo13">basic_cmds/loc_x</a></li>
<li>3.10. <a href="#robo14">basic_cmds/loc_y</a></li>
<li>3.11. <a href="#robo15">basic_cmds/tick</a></li>
</ul>
<li>4. <a href="#robo16">syscalls/team_cmds</a></li>
<ul>
<li>4.1. <a href="#robo17">team_cmds/team_declare</a></li>
<li>4.2. <a href="#robo18">team_cmds/team_send</a></li>
<li>4.3. <a href="#robo19">team_cmds/team_get</a></li>
</ul>
<li>5. <a href="#robo20">syscalls/convenience_cmds</a></li>
<ul>
<li>5.1. <a href="#robo21">convenience_cmds/dputs</a></li>
<li>5.2. <a href="#robo22">convenience_cmds/rand</a></li>
<li>5.3. <a href="#robo23">convenience_cmds/callback</a></li>
</ul>
<li>6. <a href="#robo24">syscalls/deprecated_cmds</a></li>
<ul>
<li>6.1. <a href="#robo25">deprecated_cmds/after</a></li>
<li>6.2. <a href="#robo26">deprecated_cmds/damage</a></li>
</ul>
</ul>
<a name="robo0"></a>
<a name="syscalls2ffile5fheader"></a>
<h1>1.  syscalls/file_header [ file ]  </h1>
<p class="item_name">NAME</p>
<pre>   syscalls.tcl
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   This file contains the syscalls robots can use.

   The authors are Jonas Ferry, Peter Spjuth and Martin Lindskog, based
   on TclRobots 2.0 by Tom Poindexter.

   See http://tclrobots.org for more information.
</pre>
<p class="item_name">COPYRIGHT</p>
<pre>   Jonas Ferry (jonas.ferry@gmail.com), 2010. Licensed under the
   Simplified BSD License. See LICENSE file for details.
</pre>
<a name="robo1"></a>
<a name="syscalls2fhelper"></a>
<h1>2.  syscalls/helper [ info ]  </h1>
<p class="item_name">NAME</p>
<pre>   helper
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Helper procedures
</pre>
<a name="robo2"></a>
<a name="helper2f5fping5fcheck"></a>
<h2>2.1.  helper/_ping_check [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   _ping_check
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Check the answer from a yield for a ping alert
</pre>
<p class="item_name">SOURCE</p>
<pre class="source">proc _ping_check {val} {
    if {[lindex $val 0] eq "alert"} {
        #  ping_proc:        dsp:
        [lindex $val 1] [lindex $val 2]
        set val [lrange $val 3 end]
    }
    return $val
}
</pre>
<a name="robo3"></a>
<a name="helper2f5fsyscall5fyield"></a>
<h2>2.2.  helper/_syscall_yield [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   _syscall_yield
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Combine the common syscall+yield call
</pre>
<p class="item_name">SOURCE</p>
<pre class="source">proc _syscall_yield {args} {
    set result [syscall callbackcheck]
    if {$result ne ""} {
        uplevel \#0 $result
    }
    syscall {*}$args
    return [_ping_check [yield]]
}
</pre>
<a name="robo4"></a>
<a name="syscalls2fbasic5fcmds"></a>
<h1>3.  syscalls/basic_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<pre>   basic_cmds
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Basic commands
</pre>
<a name="robo5"></a>
<a name="basic5fcmds2fscanner"></a>
<h2>3.1.  basic_cmds/scanner [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   scanner
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc scanner {degree resolution} {
    _syscall_yield scanner $degree $resolution
    _syscall_yield scanner $degree $resolution
}
</pre>
<a name="robo6"></a>
<a name="basic5fcmds2fdsp"></a>
<h2>3.2.  basic_cmds/dsp [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   dsp
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc dsp {} {
    _syscall_yield dsp
}
</pre>
<a name="robo7"></a>
<a name="basic5fcmds2falert"></a>
<h2>3.3.  basic_cmds/alert [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   alert
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc alert {procname} {
    _syscall_yield alert $procname
}
</pre>
<a name="robo8"></a>
<a name="basic5fcmds2fcannon"></a>
<h2>3.4.  basic_cmds/cannon [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   cannon
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc cannon {degree range} {
    _syscall_yield cannon $degree $range
}
</pre>
<a name="robo9"></a>
<a name="basic5fcmds2fhealth"></a>
<h2>3.5.  basic_cmds/health [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   health
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc health {} {
    _syscall_yield health
}
</pre>
<a name="robo10"></a>
<a name="basic5fcmds2fdrive"></a>
<h2>3.6.  basic_cmds/drive [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   drive
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc drive {degree speed} {
    _syscall_yield drive $degree $speed
}
</pre>
<a name="robo11"></a>
<a name="basic5fcmds2fspeed"></a>
<h2>3.7.  basic_cmds/speed [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   speed
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc speed {} {
    _syscall_yield speed
}
</pre>
<a name="robo12"></a>
<a name="basic5fcmds2fheat"></a>
<h2>3.8.  basic_cmds/heat [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   heat
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc heat {} {
    _syscall_yield heat
}
</pre>
<a name="robo13"></a>
<a name="basic5fcmds2floc5fx"></a>
<h2>3.9.  basic_cmds/loc_x [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   loc_x
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc loc_x {} {
    _syscall_yield loc_x
}
</pre>
<a name="robo14"></a>
<a name="basic5fcmds2floc5fy"></a>
<h2>3.10.  basic_cmds/loc_y [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   loc_y
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc loc_y {} {
    _syscall_yield loc_y
}
</pre>
<a name="robo15"></a>
<a name="basic5fcmds2ftick"></a>
<h2>3.11.  basic_cmds/tick [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   tick
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc tick {} {
    _syscall_yield tick
}
</pre>
<a name="robo16"></a>
<a name="syscalls2fteam5fcmds"></a>
<h1>4.  syscalls/team_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<pre>   team_cmds
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Team commands
</pre>
<a name="robo17"></a>
<a name="team5fcmds2fteam5fdeclare"></a>
<h2>4.1.  team_cmds/team_declare [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   team_declare
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc team_declare {teamname} {
    _syscall_yield team_declare $teamname
}
</pre>
<a name="robo18"></a>
<a name="team5fcmds2fteam5fsend"></a>
<h2>4.2.  team_cmds/team_send [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   team_send
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc team_send {data} {
    syscall team_send $data
}
</pre>
<a name="robo19"></a>
<a name="team5fcmds2fteam5fget"></a>
<h2>4.3.  team_cmds/team_get [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   team_get
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc team_get {} {
    syscall team_get
}
</pre>
<a name="robo20"></a>
<a name="syscalls2fconvenience5fcmds"></a>
<h1>5.  syscalls/convenience_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<pre>   convenience_cmds
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Convenience commands
</pre>
<a name="robo21"></a>
<a name="convenience5fcmds2fdputs"></a>
<h2>5.1.  convenience_cmds/dputs [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   dputs
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc dputs {args} {
    syscall dputs $args
}
</pre>
<a name="robo22"></a>
<a name="convenience5fcmds2frand"></a>
<h2>5.2.  convenience_cmds/rand [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   rand
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc rand {max} {
    syscall rand $max
}
</pre>
<a name="robo23"></a>
<a name="convenience5fcmds2fcallback"></a>
<h2>5.3.  convenience_cmds/callback [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   callback
</pre>
<p class="item_name">DESCRIPTION</p>
<p class="item_name">SOURCE</p>
<pre class="source">proc callback {time script} {
    syscall callback $time $script
}
</pre>
<a name="robo24"></a>
<a name="syscalls2fdeprecated5fcmds"></a>
<h1>6.  syscalls/deprecated_cmds [ info ]  </h1>
<p class="item_name">NAME</p>
<pre>   deprecated_cmds
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Deprecated commands kept for backwards compatibility.
</pre>
<a name="robo25"></a>
<a name="deprecated5fcmds2fafter"></a>
<h2>6.1.  deprecated_cmds/after [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   after
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   After does not work, emulate it using callbacks
</pre>
<p class="item_name">SOURCE</p>
<pre class="source">proc after {ms args} {
    set ticks [expr {$ms / 100}]
    if {[llength $args] == 0} {
        # Emulate a wait using some syscalls
        for {set t 0} {$t &lt; $ticks} {incr t} {
            syscall speed
            return [_ping_check [yield]]
        }

    } else {
        set script [join $args]
        syscall callback $ticks $script
    }
    return
}
</pre>
<a name="robo26"></a>
<a name="deprecated5fcmds2fdamage"></a>
<h2>6.2.  deprecated_cmds/damage [ procedure ]  </h2>
<p class="item_name">NAME</p>
<pre>   damage
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   damage

   The damage command reports the current percent of damage suffered by
   the robot, 0-99. At 100% damage, the robot is "dead", and as such,
   the control program is no longer running.
</pre>
<p class="item_name">SOURCE</p>
<div id="footer">
<p>Generated from ./ with ROBODoc V4.99.38 on Tue Mar 09 2010 22:14:09
</p>
</div> <!-- footer -->



</body>
</html>

